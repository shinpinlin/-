<main>
  @switch (view()) {
    @case ('login') {
      <app-login 
        (studentLoginSuccess)="onStudentLogin($event)" 
        (adminLoginSuccess)="onAdminLogin()">
      </app-login>
    }
    @case ('student') {
      @if(currentUser(); as user) {
        <app-student-view [currentUser]="user" (logout)="onLogout()"></app-student-view>
      } @else {
        <!-- Fallback if currentUser is null, should not happen in normal flow -->
        <app-login 
          (studentLoginSuccess)="onStudentLogin($event)" 
          (adminLoginSuccess)="onAdminLogin()">
        </app-login>
      }
    }
    @case ('admin') {
      <!-- ğŸš€ é€™æ˜¯æˆ‘å€‘æ–°å¢çš„æŒ‰éˆ•å€å¡Š -->
      <div style="padding: 1rem; background: #fef2f2; border-bottom: 1px solid #fecaca;">
        <h3 style="font-weight: bold; margin: 0 0 0.5rem 0;">ç®¡ç†å“¡ç‰¹æ®Šæ“ä½œ</h3>
        <button (click)="resetAttendance()" style="background-color: #ef4444; color: white; padding: 0.5rem 1rem; border: none; border-radius: 0.25rem; cursor: pointer;">
          é‡ç½®æ‰€æœ‰å­¸ç”Ÿç‹€æ…‹ (è¨­ç‚º 'å‡ºå¸­é»˜èª')
        </button>
      </div>
      
      <!-- é€™æ˜¯æ‚¨åŸæœ¬çš„ç®¡ç†å“¡è¦–åœ– -->
      <app-admin-view (logout)="onLogout()"></app-admin-view>
    }
  }
</main>